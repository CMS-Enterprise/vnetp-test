<a routerLink="/vmware" queryParamsHandling="merge" class="btn btn-info">
  <fa-icon class="icon" [icon]="['fas', 'chevron-left']"></fa-icon>
  <span>Back</span>
</a>

<h1>Virtual Machine: {{ VirtualMachine?.name | slice: 0:20 }}{{ VirtualMachine?.name?.length > 20 ? '...' : '' }}</h1>

<section class="btn-toolbar" role="toolbar">
  <!-- Restore Virtual Machine -->
  <button *ngIf="VirtualMachine?.deletedAt" class="btn btn-success" (click)="restoreVirtualMachine(VirtualMachine)">
    <fa-icon class="icon" [icon]="['fas', 'undo']"></fa-icon>
    <span>Restore Virtual Machine</span>
  </button>

  <!-- Delete Virtual Machine -->
  <button class="btn btn-danger" (click)="deleteVirtualMachine(VirtualMachine)">
    <fa-icon class="icon" [icon]="['fas', 'trash']"></fa-icon>
    <span>Delete Virtual Machine</span>
  </button>
</section>

<div *ngIf="VirtualMachine">
  <app-view-field background="none" label="Description" [value]="VirtualMachine.description || 'No description provided'"></app-view-field>

  <div class="details">
    <app-view-field label="CPU Cores" [value]="VirtualMachine.cpuCores"></app-view-field>
    <app-view-field label="CPU Per Socket" [value]="VirtualMachine.cpuCoresPerSocket"></app-view-field>
    <app-view-field label="CPU Reserved?" [value]="VirtualMachine.cpuReserved"></app-view-field>
    <app-view-field label="Memory Size" [value]="ConversionUtil.convertBytesToGb(VirtualMachine.memorySize) + ' GB'"></app-view-field>
    <app-view-field label="Memory Reserved?" [value]="VirtualMachine.memoryReserved"></app-view-field>
    <app-view-field label="High Performance?" [value]="VirtualMachine.highPerformance"></app-view-field>
  </div>

  <!-- Virtual Disks table -->
  <h2>Virtual Disks</h2>
  <table class="table table-striped">
    <caption>
      <fa-icon class="icon" [icon]="['fas', 'table']"></fa-icon>
      <span>Virtual Disks in the currently selected Virtual Machine</span>
    </caption>
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Size</th>
        <th scope="col">Raw LUN</th>
        <th scope="col">State</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let v of virtualDisks">
        <td>
          <span>{{ v.name | slice: 0:20 }}{{ v?.name?.length > 20 ? '...' : '' }}</span>
        </td>
        <td>
          <span>{{ ConversionUtil.convertBytesToGb(v.diskSize) }} GB</span>
        </td>
        <td>
          <span>{{ v.rawLun }}</span>
        </td>
        <td>
          <span>{{ v.provisionedAt ? 'Provisioned' : 'Not Provisioned' }}</span>
        </td>
      </tr>
      <tr *ngIf="!virtualDisks?.length" class="text-center">
        <td colspan="4">No Virtual Disks</td>
      </tr>
    </tbody>
  </table>

  <!-- Network Adapters table -->
  <h2>Network Adapters</h2>
  <table class="table table-striped">
    <caption>
      <fa-icon class="icon" [icon]="['fas', 'table']"></fa-icon>
      <span>Network Adapters in the currently selected Virtual Machine</span>
    </caption>
    <thead>
      <tr>
        <th scope="col">Adapter</th>
        <th scope="col">VLAN</th>
        <th scope="col">State</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let n of networkAdapters">
        <td>
          <span>{{ n.name | slice: 0:20 }}{{ n?.name.length > 20 ? '...' : '' }}</span>
        </td>
        <td>
          <span>{{ n.vlanId }}</span>
        </td>
        <td>
          <span>{{ n.provisionedAt ? 'Provisioned' : 'Not Provisioned' }}</span>
        </td>
      </tr>
      <tr *ngIf="!networkAdapters?.length" class="text-center">
        <td colspan="3">No Network Adapters</td>
      </tr>
    </tbody>
  </table>

  <app-yes-no-modal></app-yes-no-modal>
</div>
