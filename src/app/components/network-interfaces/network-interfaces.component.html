<div>
  <div class="input-group input-group-sm pb-2">
    <div class="input-group-prepend">
      <span class="input-group-text">VRF</span>
    </div>

    <select
      name="vrf"
      class="form-control col-md-3 mr-1"
      [(ngModel)]="currentVrf"
      (ngModelChange)="getVrfObjects(currentVrf)"
      [disabled]="dirty"
    >
      <option *ngFor="let vrf of vrfs" [ngValue]="vrf">{{ vrf.name }}</option>
    </select>
    <div class="button-group btn-group-sm">
      <button
        type="button"
        class="btn btn-danger mr-1"
        aria-label="Save Changes to Current VRF"
        (click)="saveAll()"
        [hidden]="!dirty"
      >
        Save Changes to Current VRF
      </button>
      <button
        type="button"
        class="btn btn-warning mr-1"
        aria-label="Clear Changes to Current VRF"
        (click)="getVrfs()"
        [hidden]="!dirty"
      >
        Clear Changes to Current VRF
      </button>
    </div>

    <div *ngIf="currentVrf">
      <app-import-export
        [exportObject]="LogicalInterfaces"
        exportFileName="logicalInterfaces-{{ currentVrf.name }}"
        (import)="insertLogicalInterfaces($event)"
      ></app-import-export>
    </div>
  </div>

  <ul class="nav nav-tabs">
    <li class="nav-item" (click)="navIndex = 0">
      <a class="nav-link" [ngClass]="{ active: navIndex == 0 }"
        >Logical Interfaces</a
      >
    </li>
  </ul>

  <div *ngIf="navIndex == 0">
    <div class="btn-group-sm m-2" role="group">
      <button
        type="button"
        class="btn btn-success btn-sm"
        (click)="createLogicalInterface()"
        aria-label="Create Logical Interface"
      >
        Create Logical Interface
      </button>
    </div>

    <div class="card">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Native VLAN</th>
            <th scope="col">Tagged VLANs</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let logicalInterface of LogicalInterfaces">
            <td>
              <p>{{ logicalInterface.Name }}</p>
            </td>
            <td>
              <p>{{ logicalInterface.NativeSubnet }}</p>
            </td>
            <td>
              <p>{{ logicalInterface.TaggedSubnets?.length }}</p>
            </td>
            <td>
              <fa
                name="pencil"
                (click)="editLogicalInterface(logicalInterface)"
              >
              </fa>
              <fa
                name="trash"
                (click)="deleteLogicalInterface(logicalInterface)"
              >
              </fa>
            </td>
          </tr>
          <tr *ngIf="LogicalInterfaces?.length === 0" class="text-center">
            <td colspan="6">No Logical Interfaces in this VRF.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-logical-interface-modal></app-logical-interface-modal>
