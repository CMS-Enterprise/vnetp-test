<div class="container">
  <div class="header">
    <h1>Endpoint Connectivity Utility</h1>
  </div>

  <div class="content">
    <!-- Connectivity Test Form -->
    <div class="connectivity-form">
      <h2>Test Endpoint Connectivity</h2>

      <form [formGroup]="connectivityForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="sourceEndpointIp">Source IP</label>
          <input type="text" id="sourceEndpointIp" formControlName="sourceEndpointIp" placeholder="e.g. 10.0.0.1" />
          <div class="error" *ngIf="connectivityForm.get('sourceEndpointIp')?.invalid && connectivityForm.get('sourceEndpointIp')?.touched">
            Please enter a valid IP address
          </div>
        </div>

        <div class="form-group">
          <label for="sourceEndpointPort">Source Port (Optional)</label>
          <input type="number" id="sourceEndpointPort" formControlName="sourceEndpointPort" placeholder="e.g. 80" />
        </div>

        <div class="form-group">
          <label for="destinationEndpointIp">Destination IP</label>
          <input type="text" id="destinationEndpointIp" formControlName="destinationEndpointIp" placeholder="e.g. 10.0.0.2" />
          <div
            class="error"
            *ngIf="connectivityForm.get('destinationEndpointIp')?.invalid && connectivityForm.get('destinationEndpointIp')?.touched"
          >
            Please enter a valid IP address
          </div>
        </div>

        <div class="form-group">
          <label for="destinationEndpointPort">Destination Port</label>
          <input type="number" id="destinationEndpointPort" formControlName="destinationEndpointPort" placeholder="e.g. 443" />
          <div
            class="error"
            *ngIf="connectivityForm.get('destinationEndpointPort')?.invalid && connectivityForm.get('destinationEndpointPort')?.touched"
          >
            Please enter a valid port number
          </div>
        </div>

        <div class="form-group">
          <label for="ipProtocol">Protocol</label>
          <select id="ipProtocol" formControlName="ipProtocol">
            <option *ngFor="let protocol of protocolOptions" [value]="protocol">
              {{ protocol.toUpperCase() }}
            </option>
          </select>
        </div>

        <div class="form-options">
          <div class="checkbox-group">
            <input type="checkbox" id="bypassServiceGraph" formControlName="bypassServiceGraph" />
            <label for="bypassServiceGraph">Bypass Service Graph</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="generateConfig" formControlName="generateConfig" />
            <label for="generateConfig">Generate Configuration</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="applyConfig" formControlName="applyConfig" />
            <label for="applyConfig">Apply Configuration</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="bidirectional" formControlName="bidirectional" />
            <label for="bidirectional">Test Bidirectional</label>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
          <button type="submit" class="btn btn-primary" [disabled]="connectivityForm.invalid || isLoading">
            {{ isLoading ? 'Testing...' : 'Test Connectivity' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
