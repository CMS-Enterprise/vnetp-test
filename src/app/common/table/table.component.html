@if (show) { @if (showSearchBar) {
<div class="d-flex align-items-end justify-content-between border-bottom">
  @if (!config.hideSearchBar) {
  <div>
    <div class="d-flex">
      <app-search-bar
        (searchBarClearResults)="clearTableResults()"
        [columns]="searchColumns"
        (searchCriteria)="getObjectsAndFilter($event)"
      ></app-search-bar>
      <tooltip [message]="helpText?.CaseSensitive"></tooltip>
    </div>
  </div>
  } @if (!config.hideAdvancedSearch) {
  <button type="button" class="btn btn-warning align-self-end" (click)="openAdvancedSearch($event)">
    <fa-icon [icon]="['fas', 'search-plus']"></fa-icon>
    <span>Advanced Search</span>
  </button>
  }
</div>
}
<table class="table table-striped table-sm table-bordered">
  <caption>
    <fa-icon class="icon" [icon]="['fas', 'table']"></fa-icon>
    <span>{{ config.description }}</span>
  </caption>
  <thead>
    <tr>
      @for (column of config.columns; track column) {
      <th scope="col">{{ column.name }}</th>
      }
    </tr>
  </thead>
  <tbody>
    @if (data && data?.data?.length === 0) {
    <tr class="text-center">
      <td [attr.colspan]="config.columns.length">No Objects in this Tier</td>
    </tr>
    } @for (datum of data?.data | paginate : { itemsPerPage: data?.total / data?.pageCount, currentPage: data?.page, id: uniqueTableId,
    totalItems: data?.total } ; track datum) {
    <tr
      [ngStyle]="getRowStyle(datum)"
      (click)="handleRowClick($event, datum)"
      [class.expandableRow]="expandableRows"
      [attr.aria-expanded]="datum.expanded ? 'true' : 'false'"
      [ngClass]="{ expanded: datum.expanded }"
    >
      @for (column of config.columns; track column) {
      <td>
        @if (column.property) {
        {{ datum[column.property] }}
        } @if (!column.property && column.template) {
        <ng-container *ngTemplateOutlet="column.template(); context: { datum: datum }"></ng-container>
        }
      </td>
      }
    </tr>
    @if (datum.expanded && expandableRows) {
    <tr [class.expanded]="datum.expanded" class="expandableContent">
      <td [attr.colspan]="config.columns.length">
        <ng-container *ngTemplateOutlet="config.expandableRows(); context: { datum: datum }"></ng-container>
      </td>
    </tr>
    } }
  </tbody>
  @if (paginationControlsOn) {
  <tfoot>
    <td [attr.colspan]="config.columns.length">
      @if (paginationControlsOn) {
      <pagination-controls [id]="uniqueTableId" (pageChange)="currentPage = $event; onTableEvent()"></pagination-controls>
      } @if (show) {
      <span class="badge badge-pill badge-secondary ml-2 py-1 px-2 align-middle" style="font-size: 0.8em; vertical-align: middle"
        >{{ hasSearchResults ? 'Matched Entries' : 'Current Entries' }}: {{ data?.total }}</span
      >
      }
    </td>
  </tfoot>
  }
</table>
@if (paginationControlsOn) {
<section class="btn-toolbar btn-toolbar--start">
  <span class="mr-3">Entities per page</span>
  <div class="btn-group" role="group">
    <button type="button" value="20" (click)="itemsPerPage = $event.target.value; onTableEvent()" class="btn btn-light">20</button>
    @if (data?.total >= 50) {
    <button type="button" value="50" (click)="itemsPerPage = $event.target.value; onTableEvent()" class="btn btn-light">50</button>
    } @if (data?.total >= 100) {
    <button type="button" value="100" (click)="itemsPerPage = $event.target.value; onTableEvent()" class="btn btn-light">100</button>
    }
  </div>
</section>
} } @if (!config.hideAdvancedSearch) {
<app-advanced-search-modal
  [advancedSearchAdapterSubject]="advancedSearchAdapterSubject"
  (advancedSearchResults)="setAdvancedSearchData($event)"
  [formInputs]="searchColumns"
></app-advanced-search-modal>
}
