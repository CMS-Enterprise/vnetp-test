<!-- Report Issue -->
<ngx-smart-modal #reportIssueModal identifier="reportIssueModal" [dismissable]="false" (onClose)="closeModal()">
  <header class="modal-header">
    <h4 class="modal-title">Report a Problem</h4>
  </header>

  <form [formGroup]="issueForm" (ngSubmit)="saveFeedback()">
    <div class="modal-body">
      <p>This form is solely for reporting issues within the DRaaS Control System (DCS).</p>
      <p>
        <i><b>Do not</b></i> use this form to report SEV1 or SEV2 issues to DRaaS Support. Instead, to ensure SEV1/SEV2 issues are addressed
        promptly, submit a ticket in Centers for Medicare and Medicaid Service Now.
      </p>
      <div class="form-group">
        <label for="component">Component</label>
        <select
          formControlName="component"
          class="form-control"
          id="component"
          aria-label="component"
          name="component"
          (change)="update($event)"
          [class.is-invalid]="submitted && issue.component.errors"
        >
          <option *ngFor="let comp of comps" [value]="comp">
            {{ comp }}
          </option>
        </select>
        <div *ngIf="submitted && issue.component.errors" class="invalid-feedback">
          <div *ngIf="issue.component.errors.required">Component is required</div>
        </div>
      </div>
      <!-- <div class="form-row"></div> -->
      <div class="form-group">
        <!-- <label for="description">Describe your issue</label> -->
        <div>
          <div>
            {{ issueFormText[0] }}
            <textarea
              id="error"
              rows="2"
              formControlName="error"
              [class.is-invalid]="submitted && issue.error.errors"
              class="form-control"
              style="resize: none"
            >
            </textarea>
            <div *ngIf="submitted && issue.error.errors" class="invalid-feedback">
              <div *ngIf="issue.error.errors.required">Description is required</div>
            </div>
          </div>
          <div>
            {{ issueFormText[1] }}
            <textarea
              id="hasItWorked"
              rows="2"
              formControlName="hasItWorked"
              [class.is-invalid]="submitted && issue.hasItWorked.errors"
              class="form-control"
              style="resize: none"
            >
            </textarea>
            <div *ngIf="submitted && issue.hasItWorked.errors" class="invalid-feedback">
              <div *ngIf="issue.hasItWorked.errors.required">Description is required</div>
            </div>
          </div>
          <div>
            {{ issueFormText[2] }}
            <textarea
              id="whenDidItWork"
              rows="2"
              formControlName="whenDidItWork"
              [class.is-invalid]="submitted && issue.whenDidItWork.errors"
              class="form-control"
              style="resize: none"
            >
            </textarea>
            <div *ngIf="submitted && issue.whenDidItWork.errors" class="invalid-feedback">
              <div *ngIf="issue.whenDidItWork.errors.required">Description is required</div>
            </div>
          </div>
          <div>
            {{ issueFormText[3] }}
            <textarea
              id="expectation"
              rows="2"
              formControlName="expectation"
              [class.is-invalid]="submitted && issue.expectation.errors"
              class="form-control"
              style="resize: none"
            >
            </textarea>
            <div *ngIf="submitted && issue.expectation.errors" class="invalid-feedback">
              <div *ngIf="issue.expectation.errors.required">Description is required</div>
            </div>
          </div>
          <div>
            {{ issueFormText[4] }}
            <textarea
              id="whatHappened"
              rows="2"
              formControlName="whatHappened"
              [class.is-invalid]="submitted && issue.whatHappened.errors"
              class="form-control"
              style="resize: none"
            >
            </textarea>
            <div *ngIf="submitted && issue.whatHappened.errors" class="invalid-feedback">
              <div *ngIf="issue.whatHappened.errors.required">Description is required</div>
            </div>
          </div>
        </div>

        <!-- <textarea
          id="description"
          rows="15"
          formControlName="description"
          [class.is-invalid]="submitted && issue.description.errors"
          class="form-control"
        >
        </textarea> -->
      </div>
    </div>

    <footer class="modal-footer">
      <button type="button" class="btn btn-link" data-dismiss="modal" (click)="closeModal()">Cancel</button>
      <button type="submit" class="btn btn-danger" data-dismiss="modal">
        <fa-icon class="icon" [icon]="['fas', 'sign-out-alt']"></fa-icon>
        <span>Send</span>
      </button>
    </footer>
  </form>
</ngx-smart-modal>
