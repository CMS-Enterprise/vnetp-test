## Task: Investigate Login/Logout Issue

**Problem**: User gets logged out sometimes on first login once a day. Auth service may be called inadvertently.

**Analysis Completed**:
- Found error in auth.service.ts: `Cannot read properties of null (reading 'dcsPermissions')`
- Error occurs when logout() sets currentUserSubject to null, then a component tries to access user.dcsPermissions
- Issue likely caused by component subscribed to currentUser observable not handling null user properly

**Recommended Solutions**:
1. Add null checks in components accessing user.dcsPermissions
2. Add error handling in auth service
3. Add logging to track unexpected logout calls
4. Clear browser storage completely for testing

**Browser Clearing Instructions Provided**:
- Developer Tools > Application > Storage > Clear site data
- Manual browser clear with "All time" selected
- Use incognito mode for fresh testing

**Current Status**: PLAN mode - Analysis complete, awaiting user decision on next steps 

## Task: Workflow Validation API Migration

**Problem**: Compilation errors in workflow-view-modal due to API structure changes in WorkflowValidationResultDto.

**API Changes Identified**:
- `errors` → `globalErrors` (module/drift errors)
- `auditLogWithTerraformActions` → `auditLogResults: AuditLogValidationResult[]`
- New fields: `processingStatus`, `validationErrors` per audit log, `unmatchedTerraformChanges`

**Compilation Errors Fixed**:
- ✅ Line 30: `workflow.validationResult?.errors` → `workflow.validationResult?.globalErrors`
- ✅ Line 33: `workflow.validationResult.errors` → `workflow.validationResult.globalErrors`
- ✅ Line 48: `workflow.validationResult?.auditLogWithTerraformActions` → `workflow.validationResult?.auditLogResults`
- ✅ Line 52: `workflow.validationResult.auditLogWithTerraformActions` → `workflow.validationResult.auditLogResults`

**Enhancements Implemented**:
- Added processing status display for each audit log (success/skipped/validation_error/no_tf_match/no_rules)
- Added audit-specific validation errors display
- Added status reason display for failed processing cases
- Added new tab for unmatched terraform changes (drift detection)
- Updated tab labels for clarity ("Global Validation Errors", "Audit Log Results")

**Current Status**: PLAN mode - Migration complete, compilation errors resolved, enhanced UI features added 